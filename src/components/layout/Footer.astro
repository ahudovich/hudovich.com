---
import IconGitFork from '@/assets/icons/tabler/icon-git-fork.svg'
import IconHeartFilled from '@/assets/icons/tabler/icon-heart-filled.svg'
import links from '@/data/links.json'
import { cn } from '@/lib/utils/css'
import type { HTMLAttributes } from 'astro/types'

type Props = HTMLAttributes<'footer'>

const { class: className, ...props }: Props = Astro.props

const buildYear = new Date().getFullYear()
---

<footer
  class={cn(
    'sticky top-[100vh] mx-auto flex flex-col items-center gap-3 border-t border-layout-primary pt-6 pb-10 sm:flex-row sm:justify-between sm:gap-8 sm:border-none sm:pt-8 sm:pb-6',
    className
  )}
  {...props}
>
  <p class="group flex items-center gap-1.5 text-sm text-tertiary sm:text-xs">
    <span>
      &copy; <span data-current-year>{buildYear}</span> Built with
    </span>
    <IconHeartFilled
      class="shrink-0 size-3.5 text-red-600 transition-transform duration-300 group-hover:scale-120"
      aria-hidden="true"
    />
    <span>by Andrei</span>
  </p>

  <p class="inline-flex items-center gap-1 text-sm text-tertiary sm:text-xs">
    This website is
    <a
      class="group ml-1 inline-flex items-center gap-1 font-medium text-primary"
      href={links.source}
      target="_blank"
      rel="noopener noreferrer"
    >
      <span
        class="relative inline-block after:absolute after:inset-x-0 after:-bottom-px after:h-px after:bg-accent after:transition-all after:duration-300 group-hover:after:h-0.5"
      >
        open source
      </span>
      <IconGitFork class="size-3.5 shrink-0 fill-none stroke-current" aria-hidden="true" />
    </a>
  </p>
</footer>

<script>
  const currentYear = String(new Date().getFullYear())
  const yearElement = document.querySelector('[data-current-year]')

  if (yearElement) {
    yearElement.textContent = currentYear
  }
</script>
