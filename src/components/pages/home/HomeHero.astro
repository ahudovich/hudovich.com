---
import { Image } from 'astro:assets'
import IconFlagPoland from '@/assets/icons/icon-flag-pl.svg'
import avatar from '@/assets/images/avatar.png'
import Button from '@/components/ui/Button.astro'
import Hotkey from '@/components/ui/Hotkey.astro'
import links from '@/data/links.json'
---

<section>
  <Image
    class="mb-4 size-11 rounded-full"
    src={avatar}
    alt="Andrei Hudovich"
    width={44}
    height={44}
    loading="eager"
    draggable={false}
  />

  <h1 class="mb-4 font-sans font-semibold text-[1.375rem] leading-7 tracking-[0.02em]">
    Hey, I&apos;m{' '}
    <span class="border-b-[0.09375rem] border-current text-accent">Andrei Hudovich</span>!
  </h1>

  <div class="mb-5 text-md leading-[1.75] space-y-3 sm:space-y-0">
    <p>
      <span class="sm:inline-block sm:mb-1.75">
        A senior software engineer based in Wroclaw, <span class="sm:hidden">Poland.</span>
        <span class="hidden sm:inline-flex sm:items-center sm:gap-1.5">
          Poland
          <IconFlagPoland
            class="shrink-0 w-3 h-2.25 rounded-xs drop-shadow-[0_0_1px_rgba(0,0,0,0.1)]"
          />
        </span>
      </span>
    </p>

    <p>If you need a reliable developer to join your team, I&apos;m ready to dive in.</p>
  </div>

  <div class="flex items-center gap-4">
    <Button class="min-w-33" href={links.calcom} target="_blank" data-calcom>
      <Hotkey variant="primary">B</Hotkey>
      Book a call
    </Button>

    <Button href={`mailto:${links.email}`} variant="secondary" data-email>
      <Hotkey variant="secondary">E</Hotkey>
      Send an email
    </Button>
  </div>

  <p class="relative mt-4 pl-5 text-xs text-tertiary">
    <span
      class="absolute left-0 top-1/2 size-3.5 -translate-y-1/2 rounded-full bg-green-500 border-4 border-green-100"
    ></span>
    Available for hire, let&apos;s talk!
  </p>
</section>

<script>
  import hotkeys from 'hotkeys-js'

  const calcomElement = document.querySelector('[data-calcom]')
  const emailElement = document.querySelector('[data-email]')

  const calcomAnchor = calcomElement instanceof HTMLAnchorElement ? calcomElement : null
  const emailAnchor = emailElement instanceof HTMLAnchorElement ? emailElement : null

  hotkeys('b', (event) => {
    event.preventDefault()
    calcomAnchor?.click()
  })

  hotkeys('e', (event) => {
    event.preventDefault()
    emailAnchor?.click()
  })
</script>
